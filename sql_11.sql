INSERT INTO trx_persec_vlines (camname, timestamp, objid, objtype, objtype_lo, startframe, num, geom, videopart) SELECT camname, timestamp, objid, objtype, objtype_long, startframe, num, ST_MULTI(geom), videopart FROM trx_persec_lines WHERE ST_ISVALID(geom) = true AND camname = STDIN1 AND timestamp = STDIN2 AND videopart = STDIN3;
UPDATE trx_persec_vlines AS trx SET geom = sub.geom FROM (SELECT objid, ST_MULTI(ST_MAKELINE(centroid)) AS geom FROM tracks_centroids WHERE camname = STDIN1 AND timestamp = STDIN2 AND videopart = STDIN3 GROUP BY objid, objtype, startFrame ORDER BY objid) AS sub WHERE trx.camname = STDIN1 AND trx.timestamp = STDIN2 AND trx.videopart = STDIN3 AND trx.objid = sub.objid;
